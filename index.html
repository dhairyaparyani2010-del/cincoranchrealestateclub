<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cinco Ranch Real Estate Club</title>
  <script src="https://unpkg.com/lucide@0.259.0/dist/lucide.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- Header -->
  <header class="p-4 bg-white shadow-md flex justify-between items-center">
    <h1 class="text-xl font-bold">Cinco Ranch Real Estate Club</h1>
    <button id="mobile-menu-btn" class="md:hidden">
      <i data-lucide="menu"></i>
    </button>
    <nav id="mobile-menu" class="hidden md:flex space-x-4">
      <a href="#" class="nav-link">Home</a>
      <a href="#" class="nav-link">Expenses</a>
      <a href="#" class="nav-link">Admin</a>
    </nav>
  </header>

  <!-- User ID Display -->
  <p id="user-id-display" class="p-4 text-sm text-gray-500"></p>

  <!-- Admin Section -->
  <div id="admin-section" class="hidden p-4 bg-white shadow-md m-4">
    <h2 class="text-lg font-bold">Admin Section</h2>
    <form id="add-expense-form" class="mt-4 space-y-2">
      <input id="expense-description" placeholder="Description" class="border p-2 w-full"/>
      <input id="expense-amount" type="number" placeholder="Amount" class="border p-2 w-full"/>
      <select id="expense-type" class="border p-2 w-full">
        <option value="Income">Income</option>
        <option value="Expense">Expense</option>
      </select>
      <button onclick="addExpense(event)" class="bg-blue-500 text-white px-4 py-2 rounded">Add</button>
      <p id="expense-message" class="hidden"></p>
    </form>
  </div>

  <!-- Admin Modal -->
  <div id="admin-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
    <div class="bg-white p-6 rounded shadow-md">
      <h2 class="text-lg font-bold mb-2">Enter Admin Password</h2>
      <input id="admin-password-input" type="password" placeholder="Password" class="border p-2 w-full"/>
      <p id="admin-error" class="text-red-500 hidden mt-2">Wrong password!</p>
      <div class="mt-4 flex justify-end space-x-2">
        <button onclick="checkAdminPassword()" class="bg-green-500 text-white px-4 py-2 rounded">Enter</button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script type="module">
    window.addEventListener('DOMContentLoaded', () => {
      // --- Safety wrappers for DOM elements ---
      const mobileMenuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      const navLinks = document.querySelectorAll('.nav-link');
      const userIdDisplay = document.getElementById('user-id-display');
      const adminModal = document.getElementById('admin-modal');
      const adminSection = document.getElementById('admin-section');
      const adminInput = document.getElementById('admin-password-input');
      const adminError = document.getElementById('admin-error');
      const expenseForm = document.getElementById('add-expense-form');
      const expenseDescription = document.getElementById('expense-description');
      const expenseAmount = document.getElementById('expense-amount');
      const expenseType = document.getElementById('expense-type');
      const expenseMessage = document.getElementById('expense-message');

      // --- User ID ---
      let userId = (typeof crypto.randomUUID === 'function') ? crypto.randomUUID() : 'user-' + Math.random().toString(36).substring(2,10);
      if (userIdDisplay) userIdDisplay.textContent = 'User ID: ' + userId;

      // --- Mobile Menu ---
      if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', () => {
          mobileMenu.classList.toggle('hidden');
          const icon = mobileMenuBtn.querySelector('i');
          if (icon) icon.setAttribute('data-lucide', mobileMenu.classList.contains('hidden') ? 'menu' : 'x');
          lucide.createIcons();
        });
      }

      if (navLinks) {
        navLinks.forEach(link => {
          link.addEventListener('click', () => {
            if (mobileMenu) mobileMenu.classList.add('hidden');
            if (mobileMenuBtn) {
              const icon = mobileMenuBtn.querySelector('i');
              if (icon) icon.setAttribute('data-lucide', 'menu');
            }
          });
        });
      }

      // --- Admin ---
      const ADMIN_PASSWORD = "crrc2025!";
      window.showAdminModal = () => {
        if (!adminModal || !adminInput || !adminError) return;
        adminInput.value = '';
        adminError.classList.add('hidden');
        adminModal.classList.remove('hidden');
      };

      window.checkAdminPassword = () => {
        if (!adminInput || !adminModal || !adminSection || !adminError) return;
        if (adminInput.value === ADMIN_PASSWORD) {
          adminModal.classList.add('hidden');
          adminSection.classList.remove('hidden');
          adminSection.scrollIntoView({ behavior: 'smooth' });
        } else {
          adminError.classList.remove('hidden');
          adminInput.value = '';
        }
      };

      if (adminInput) {
        adminInput.addEventListener('keydown', e => {
          if (e.key === 'Enter') {
            e.preventDefault();
            window.checkAdminPassword();
          }
        });
      }

      // --- Expense Form ---
      window.addExpense = (e) => {
        e.preventDefault();
        if (!expenseForm || !expenseDescription || !expenseAmount || !expenseType || !expenseMessage) return;
        const desc = expenseDescription.value.trim();
        const amount = parseFloat(expenseAmount.value);
        const type = expenseType.value;

        if (!desc || isNaN(amount) || amount <= 0) {
          expenseMessage.textContent = "Enter valid description and amount";
          expenseMessage.classList.remove('hidden');
          expenseMessage.classList.add('text-red-400');
          setTimeout(() => expenseMessage.classList.add('hidden'), 3000);
          return;
        }

        expenseMessage.textContent = `${type} added successfully!`;
        expenseMessage.classList.remove('hidden');
        expenseMessage.classList.remove('text-red-400');
        expenseMessage.classList.add('text-green-400');
        expenseForm.reset();
        setTimeout(() => expenseMessage.classList.add('hidden'), 3000);
      };
    });
  </script>
</body>
</html>

    </script>
</body>
</html>
